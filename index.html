<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Randy Comic Art</title>
<style>
/* Reset & base styles */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: Arial, sans-serif;
  line-height: 1.6;
  background: linear-gradient(135deg,#0c0c0c 0%,#1a1a2e 15%,#16213e 35%,#0f3460 50%,#533a7d 70%,#8b5a8c 85%,#a0616a 100%);
  color: #fff;
}

/* Glass */
.glass {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,0.15);
  box-shadow: 0 8px 30px rgba(0,0,0,0.3);
}

/* Header */
header {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,0.2);
  text-align: center;
  padding: 20px;
}
header h1 { font-size: 2.5rem; margin-bottom: 10px; }
nav { display:flex; justify-content:center; gap:15px; flex-wrap:wrap; }
nav a { color:#fff; text-decoration:none; font-weight:bold; padding:8px 15px; border-radius:10px; transition:all .3s; }
nav a:hover, nav a.active { background: rgba(255,255,255,0.1); text-shadow:0 0 10px rgba(255,255,255,0.5); }

/* Section + headings */
section { padding:40px 20px; max-width:1200px; margin:40px auto; }
h2 { text-align:center; margin-bottom:20px; font-size:2rem; }

/* Carousel container */
.carousel-container {
  position: relative;
  max-width: 1200px;
  margin: 40px auto;
  padding: 30px 0;
}

/* viewport and track */
.carousel-viewport { overflow:hidden; width:100%; outline: none; }
.carousel-track {
  display:flex;
  gap:30px;
  align-items:center;
  transition: transform 450ms cubic-bezier(.2,.8,.2,1);
  will-change: transform;
  padding: 20px 10px;
}

/* image styles */
.carousel-track img {
  width:300px;
  flex: 0 0 auto;
  border-radius:20px;
  border:2px solid rgba(255,255,255,0.12);
  box-shadow:0 6px 18px rgba(0,0,0,0.35);
  transition: transform 300ms, opacity 300ms;
  cursor:pointer;
  user-select: none;
}
.carousel-track img.center { transform: scale(1.08); z-index:2; }
.carousel-track img.side { transform: scale(0.9); opacity:0.85; z-index:1; }

/* arrows */
.arrow {
  z-index: 20;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 2rem;
  color: #fff;
  cursor: pointer;
  user-select: none;
  background: rgba(255,255,255,0.1);
  padding: 10px 14px;
  border-radius: 10px;
  transition: all .2s;
  border: none;
}
.arrow:hover { background: rgba(255,255,255,0.2); }
.arrow.left { left: 10px; }
.arrow.right { right: 10px; }

/* accessibility focus ring */
.carousel-viewport:focus { box-shadow: 0 0 0 4px rgba(255,255,255,0.06) inset; border-radius: 12px; }

/* responsive */
@media(max-width:900px) { .carousel-track img { width:220px; } }
@media(max-width:600px){
  .carousel-track { gap:18px; }
  .carousel-track img { width:200px; }
  .arrow { top: auto; bottom: 12px; transform: none; }
  .arrow.left { left: 28%; }
  .arrow.right { right: 28%; }
}

/* footer */
footer { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); text-align:center; padding:20px; margin-top:40px; border-top:1px solid rgba(255,255,255,0.2); }
</style>
</head>
<body>

<header class="glass">
  <h1>Randy Comic Art</h1>
  <nav>
    <a href="#fanart">Fan Art</a>
    <a href="#nightwatch">Nightwatch</a>
    <a href="#original">Original</a>
    <a href="#process">Process</a>
    <a href="#contact">Contact</a>
  </nav>
</header>

<!-- Featured -->
<section id="home">
  <h2>Featured Art</h2>
  <div class="carousel-container glass">
    <button class="arrow left" aria-label="Previous">&#10094;</button>
    <div class="carousel-viewport" tabindex="0" aria-roledescription="carousel">
      <div class="carousel-track">
        <img src="images/fanart1.png" alt="Featured 1" loading="lazy">
        <img src="images/fanart2.png" alt="Featured 2" loading="lazy">
        <img src="images/fanart3.png" alt="Featured 3" loading="lazy">
      </div>
    </div>
    <button class="arrow right" aria-label="Next">&#10095;</button>
  </div>
</section>

<!-- Fan Art (example: you mentioned 14 images) -->
<section id="fanart" class="glass">
  <h2>Fan Art</h2>
  <div class="carousel-container glass">
    <button class="arrow left" aria-label="Previous">&#10094;</button>
    <div class="carousel-viewport" tabindex="0" aria-roledescription="carousel">
      <div class="carousel-track">
        <!-- put your 14 fan art images here -->
        <img src="images/fanart1.png" alt="Fan Art 1" loading="lazy">
        <img src="images/fanart2.png" alt="Fan Art 2" loading="lazy">
        <img src="images/fanart3.png" alt="Fan Art 3" loading="lazy">
        <img src="images/fanart4.png" alt="Fan Art 4" loading="lazy">
        <img src="images/fanart5.png" alt="Fan Art 5" loading="lazy">
        <img src="images/fanart6.png" alt="Fan Art 6" loading="lazy">
        <img src="images/fanart7.png" alt="Fan Art 7" loading="lazy">
        <img src="images/fanart8.png" alt="Fan Art 8" loading="lazy">
        <img src="images/fanart9.png" alt="Fan Art 9" loading="lazy">
        <img src="images/fanart10.png" alt="Fan Art 10" loading="lazy">
        <img src="images/fanart11.png" alt="Fan Art 11" loading="lazy">
        <img src="images/fanart12.png" alt="Fan Art 12" loading="lazy">
        <img src="images/fanart13.png" alt="Fan Art 13" loading="lazy">
        <img src="images/fanart14.png" alt="Fan Art 14" loading="lazy">
      </div>
    </div>
    <button class="arrow right" aria-label="Next">&#10095;</button>
  </div>
</section>

<!-- Nightwatch (4) -->
<section id="nightwatch" class="glass">
  <h2>Nightwatch</h2>
  <div class="carousel-container glass">
    <button class="arrow left" aria-label="Previous">&#10094;</button>
    <div class="carousel-viewport" tabindex="0" aria-roledescription="carousel">
      <div class="carousel-track">
        <img src="images/nightwatch1.png" alt="Nightwatch 1" loading="lazy">
        <img src="images/nightwatch2.png" alt="Nightwatch 2" loading="lazy">
        <img src="images/nightwatch3.png" alt="Nightwatch 3" loading="lazy">
        <img src="images/nightwatch4.png" alt="Nightwatch 4" loading="lazy">
      </div>
    </div>
    <button class="arrow right" aria-label="Next">&#10095;</button>
  </div>
</section>

<!-- Original (1) -->
<section id="original" class="glass">
  <h2>Original Art</h2>
  <div class="carousel-container glass">
    <button class="arrow left" aria-label="Previous">&#10094;</button>
    <div class="carousel-viewport" tabindex="0" aria-roledescription="carousel">
      <div class="carousel-track">
        <img src="images/original1.png" alt="Original Art 1" loading="lazy">
      </div>
    </div>
    <button class="arrow right" aria-label="Next">&#10095;</button>
  </div>
</section>

<!-- Process (11) -->
<section id="process" class="glass">
  <h2>Process / Sketches</h2>
  <div class="carousel-container glass">
    <button class="arrow left" aria-label="Previous">&#10094;</button>
    <div class="carousel-viewport" tabindex="0" aria-roledescription="carousel">
      <div class="carousel-track">
        <img src="images/process1.png" alt="Process 1" loading="lazy">
        <img src="images/process2.png" alt="Process 2" loading="lazy">
        <img src="images/process3.png" alt="Process 3" loading="lazy">
        <img src="images/process4.png" alt="Process 4" loading="lazy">
        <img src="images/process5.png" alt="Process 5" loading="lazy">
        <img src="images/process6.png" alt="Process 6" loading="lazy">
        <img src="images/process7.png" alt="Process 7" loading="lazy">
        <img src="images/process8.png" alt="Process 8" loading="lazy">
        <img src="images/process9.png" alt="Process 9" loading="lazy">
        <img src="images/process10.png" alt="Process 10" loading="lazy">
        <img src="images/process11.png" alt="Process 11" loading="lazy">
      </div>
    </div>
    <button class="arrow right" aria-label="Next">&#10095;</button>
  </div>
</section>

<!-- Contact -->
<section id="contact" class="glass">
  <h2>Contact</h2>
  <p style="text-align:center;">Email: <a href="mailto:randy.mattoka@gmail.com">randy.mattoka@gmail.com</a></p>
</section>

<footer class="glass">&copy; 2025 Randy Comic Art</footer>

<script>
/*
  Enhanced carousel initializer:
  - Infinite loop via cloning first/last slide
  - Autoplay with pause on hover/focus
  - Pointer/touch swipe
  - Click, keyboard, buttons
  - Lazy images using loading="lazy" already in HTML
*/

document.querySelectorAll('.carousel-container').forEach((container) => {
  const viewport = container.querySelector('.carousel-viewport');
  const track = container.querySelector('.carousel-track');
  const leftBtn = container.querySelector('.arrow.left');
  const rightBtn = container.querySelector('.arrow.right');
  if (!viewport || !track) return;

  let slides = Array.from(track.children);
  if (slides.length === 0) return;

  // autoplay config
  const AUTOPLAY_DELAY = 3500;
  let autoplayTimer = null;
  let autoplayEnabled = true;

  // create clones for seamless looping (clone first and last)
  const firstClone = slides[0].cloneNode(true);
  const lastClone = slides[slides.length - 1].cloneNode(true);
  firstClone.classList.add('clone');
  lastClone.classList.add('clone');
  track.appendChild(firstClone);
  track.insertBefore(lastClone, track.firstChild);

  // refresh slides array
  slides = Array.from(track.querySelectorAll('img'));
  // activeIndex is index within slides (including clones). We'll start at index 1 (the real first).
  let activeIndex = 1;

  // ensure viewport focusable for keyboard/pause
  viewport.setAttribute('tabindex', '0');

  // helper to get slide width+gap
  function getSlideSize() {
    const gap = parseFloat(getComputedStyle(track).gap) || 30;
    const firstReal = slides[activeIndex];
    // fallback to first if something odd
    const w = (firstReal && firstReal.getBoundingClientRect().width) || slides[0].getBoundingClientRect().width;
    return w + gap;
  }

  // position track to activeIndex
  function setTrackPosition(animate = true) {
    const slideSize = getSlideSize();
    const viewportWidth = viewport.getBoundingClientRect().width;
    const currentSlide = slides[activeIndex];
    const slideWidth = currentSlide.getBoundingClientRect().width;
    const offset = (viewportWidth / 2) - (slideWidth / 2);
    const translateX = -(activeIndex * slideSize) + offset - parseFloat(getComputedStyle(track).paddingLeft || 0);
    if (!animate) {
      track.style.transition = 'none';
      track.style.transform = `translateX(${translateX}px)`;
      // force reflow then restore
      void track.offsetWidth;
      track.style.transition = '';
    } else {
      track.style.transform = `translateX(${translateX}px)`;
    }
    updateClasses();
  }

  function updateClasses() {
    slides.forEach((s, i) => {
      s.classList.remove('center', 'side');
      if (i === activeIndex) s.classList.add('center');
      else s.classList.add('side');
    });
  }

  // normalize to real slide index when landing on clones
  function handleTransitionEnd() {
    // if we are on the cloned first (which is last item)
    if (slides[activeIndex].classList.contains('clone')) {
      // if it's the firstClone (which equals a clone of index 0 content)
      if (activeIndex === slides.length - 1) {
        // jump to real first (index 1)
        activeIndex = 1;
        setTrackPosition(false);
      } else if (activeIndex === 0) {
        // we are on lastClone -> jump to real last (slides.length - 2)
        activeIndex = slides.length - 2;
        setTrackPosition(false);
      }
    }
  }

  track.addEventListener('transitionend', handleTransitionEnd);

  // navigation helpers
  function prev() {
    if (isAnimating) return;
    isAnimating = true;
    activeIndex = activeIndex - 1;
    setTrackPosition(true);
    startResetAnimatingTimer();
  }
  function next() {
    if (isAnimating) return;
    isAnimating = true;
    activeIndex = activeIndex + 1;
    setTrackPosition(true);
    startResetAnimatingTimer();
  }

  // small guard since multiple rapid clicks can conflict with transitionend logic
  let isAnimating = false;
  function startResetAnimatingTimer() {
    // reset isAnimating at transition end or fallback after 500ms
    clearTimeout(container._animTO);
    container._animTO = setTimeout(()=> { isAnimating = false; }, 550);
  }

  leftBtn && leftBtn.addEventListener('click', () => { pauseAutoplay(); prev(); });
  rightBtn && rightBtn.addEventListener('click', () => { pauseAutoplay(); next(); });

  // click-to-center for slides
  slides.forEach((s, i) => {
    s.addEventListener('click', () => {
      pauseAutoplay();
      activeIndex = i;
      setTrackPosition(true);
    });
    s.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        pauseAutoplay();
        activeIndex = i;
        setTrackPosition(true);
      }
    });
  });

  // keyboard arrows
  viewport.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') { pauseAutoplay(); prev(); }
    if (e.key === 'ArrowRight') { pauseAutoplay(); next(); }
  });

  // autoplay
  function startAutoplay() {
    if (!autoplayEnabled) return;
    clearInterval(autoplayTimer);
    autoplayTimer = setInterval(() => {
      next();
    }, AUTOPLAY_DELAY);
  }
  function pauseAutoplay() {
    clearInterval(autoplayTimer);
  }

  // pause on hover / focus
  container.addEventListener('mouseenter', () => { pauseAutoplay(); });
  container.addEventListener('mouseleave', () => { if (autoplayEnabled) startAutoplay(); });
  container.addEventListener('focusin', () => { pauseAutoplay(); });
  container.addEventListener('focusout', () => { if (autoplayEnabled) startAutoplay(); });

  // pointer / touch swipe
  let pointer = { down: false, startX: 0, currentX: 0, delta: 0, startTime: 0 };
  viewport.addEventListener('pointerdown', (e) => {
    pauseAutoplay();
    viewport.setPointerCapture(e.pointerId);
    pointer.down = true;
    pointer.startX = e.clientX;
    pointer.currentX = e.clientX;
    pointer.startTime = Date.now();
    track.style.transition = 'none';
  });

  viewport.addEventListener('pointermove', (e) => {
    if (!pointer.down) return;
    pointer.currentX = e.clientX;
    pointer.delta = pointer.currentX - pointer.startX;
    const translate = getComputedTranslateX(); // current translate of track
    track.style.transform = `translateX(${translate + pointer.delta}px)`;
  });

  viewport.addEventListener('pointerup', (e) => {
    if (!pointer.down) return;
    pointer.down = false;
    viewport.releasePointerCapture(e.pointerId);
    // determine swipe threshold
    const swipeDist = pointer.delta;
    const swipeTime = Date.now() - pointer.startTime;
    const slideSize = getSlideSize();
    const swipeThreshold = Math.min(60, slideSize * 0.2); // 20% of slide or 60px
    // quick flick or enough distance -> change slide
    if (swipeDist > swipeThreshold || (swipeDist > 10 && swipeTime < 250)) {
      // swipe right -> prev
      prev();
    } else if (swipeDist < -swipeThreshold || (swipeDist < -10 && swipeTime < 250)) {
      // swipe left -> next
      next();
    } else {
      // not enough -> snap back
      setTrackPosition(true);
    }
    pointer.delta = 0;
    startAutoplay();
  });

  // helper to read current translateX (number)
  function getComputedTranslateX() {
    const st = window.getComputedStyle(track);
    const m = st.transform || st.webkitTransform;
    if (m && m !== 'none') {
      const values = m.match(/matrix.*\((.+)\)/)[1].split(', ');
      // matrix(a, b, c, d, tx, ty) -> tx is values[4]
      return parseFloat(values[4]);
    }
    return 0;
  }

  // ensure responsive recalculation
  window.addEventListener('resize', () => {
    clearTimeout(container._resizeTO);
    container._resizeTO = setTimeout(() => setTrackPosition(false), 80);
  });

  // initialize position
  // small timeout allows images to load and sizes to stabilize
  setTimeout(() => {
    setTrackPosition(false);
    // start autoplay if desired (only if more than one real slide)
    if (slides.length > 3) startAutoplay();
  }, 80);
});
</script>

</body>
</html>
