<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Randy Mattoka Art</title>
<style>
/* Base */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
Â  font-family: Arial, sans-serif;
Â  line-height: 1.6;
Â  /* Updated Background Gradient */
Â  background: linear-gradient(135deg,#0c0c0c 0%,#1a1a2e 15%,#16213e 35%,#0f3460 50%,#533a7d 70%,#8b5a8c 85%,#a0616a 100%);
Â  color: #fff;
}
/* Reusing the .glass class for other sections */
.glass {
Â  background: rgba(255,255,255,0.05);
Â  backdrop-filter: blur(15px);
Â  border-radius: 20px;
Â  border: 1px solid rgba(255,255,255,0.15);
Â  box-shadow: 0 8px 30px rgba(0,0,0,0.3);
}

/* --- Header & Navigation Styles --- */
header { text-align: center; padding: 40px 20px 0; }
.header-content {
Â  max-width: 1200px;
Â  margin: 0 auto;
Â  background: rgba(255,255,255,0.1);Â 
Â  backdrop-filter: blur(10px);
Â  padding: 20px;
Â  border-radius: 20px;
Â  border: 1px solid rgba(255,255,255,0.15);Â 
Â  box-shadow: 0 8px 30px rgba(0,0,0,0.3);
}
header h1 { font-size: 2.5rem; margin-top: 0; margin-bottom: 10px; }
nav { display:flex; justify-content:center; gap:15px; flex-wrap:wrap; }
nav a {
Â  color:#fff; text-decoration:none; font-weight:bold;
Â  padding:8px 15px; border-radius:10px; transition:all .3s;
}
nav a:hover, nav a.active {
Â  background:rgba(255,255,255,0.1); text-shadow:0 0 10px rgba(255,255,255,0.5);
}

/* --- Section Content & Carousel Styles (Non-Modal) --- */
section { padding:40px 20px; max-width:1200px; margin:40px auto; }
h2 { text-align:center; margin-bottom:20px; font-size:2rem; }
.carousel-wrapper { position: relative; display: flex; align-items: center; justify-content: center; }
.carousel-container { position: relative; width: 100%; max-width: 1200px; overflow: hidden; }
.carousel-track {
Â  display: flex; gap: 30px; align-items: center;
Â  transition: transform 450ms cubic-bezier(.2,.8,.2,1);
Â  will-change: transform; padding: 20px 10px;
}

/* Carousel Images */
.carousel-track img {
Â  width: 300px; flex: 0 0 auto; border-radius: 20px;
Â  border: 2px solid rgba(255,255,255,0.12); box-shadow: 0 6px 18px rgba(0,0,0,0.35);
Â  transition: transform 300ms, opacity 300ms;
Â  cursor: pointer; user-select: none;
}
.carousel-track img.center { transform: scale(1.08); z-index: 2; }
.carousel-track img.side { transform: scale(0.9); opacity: 0.85; z-index: 1; }

/* Carousel Arrows & Modal Button Style */
.arrow-shell {
Â  position: absolute; top: 50%; transform: translateY(-50%);
Â  width: 72px; height: 72px; display: flex; align-items: center;
Â  justify-content: center; z-index: 60; pointer-events: none;
}
.arrow-shell.left { left: -112px; }
.arrow-shell.right { right: -112px; }
.arrow, .modal-nav-button {Â 
Â  pointer-events: auto; width: 64px; height: 64px; border-radius: 50%;
Â  border: 1px solid rgba(255,255,255,0.45);
Â  background: linear-gradient(180deg, rgba(255,255,255,0.36), rgba(255,255,255,0.22));
Â  color: rgba(12,12,12,0.95); font-size: 1.8rem;
Â  display: inline-flex; align-items: center; justify-content: center;
Â  cursor: pointer; transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
Â  box-shadow: inset 0 2px 4px rgba(255,255,255,0.55), 0 10px 24px rgba(0,0,0,0.45);
Â  outline: none;
Â  font-weight: bold;
}
.arrow:hover:not(:disabled), .arrow:focus:not(:disabled),
.modal-nav-button:hover:not(:disabled), .modal-nav-button:focus:not(:disabled) {
Â  transform: scale(1.08);
Â  background: linear-gradient(180deg, rgba(255,255,255,0.46), rgba(255,255,255,0.28));
Â  box-shadow: inset 0 3px 6px rgba(255,255,255,0.6), 0 12px 30px rgba(0,0,0,0.5);
}
.arrow:disabled, .modal-nav-button:disabled { opacity: 0.28; cursor: default; transform: none; }


/* --- ğŸ–¼ï¸ Modal/Lightbox Styles --- */
.modal-overlay {
Â  display: none;Â 
Â  position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
Â  overflow: auto;
Â  background: rgba(255,255,255,0.05);Â 
Â  backdrop-filter: blur(15px);Â 
Â  border: 1px solid rgba(255,255,255,0.15);Â 
Â  box-shadow: 0 8px 30px rgba(0,0,0,0.3);Â 
Â  align-items: center; justify-content: center;
}

/* Modal Content (The two columns container) */
.modal-content {
Â  position: relative;Â 
Â  margin: 5% auto;Â 
Â  padding: 0;Â 
Â  width: 90%;Â 
Â  max-width: 1200px;Â 
Â  height: 85vh;Â 
Â  background: transparent;
Â  border: none;Â 
Â  box-shadow: none;Â 
Â  border-radius: 20px;Â 
Â Â 
Â  display: flex;Â 
Â  align-items: stretch;Â 
}

/* Left Column: Image and Magnifier */
.image-column {
Â  Â  flex: 2;Â 
Â  Â  padding: 20px;
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  background: transparent;Â 
Â  Â  /* Defines the left-side rounding */
Â  Â  border-radius: 15px 0 0 15px;Â 
}

/* Right Column: Description Panel (FIXED BORDER RADIUS) */
.description-column {
Â  Â  flex: 1;Â 
Â  Â  background: #333;Â 
Â  Â  backdrop-filter: blur(10px);Â 
Â  Â  /* FIXED: Ensures all corners of the panel are rounded (15px) for desktop view */
Â  Â  border-radius: 15px 15px 15px 15px;Â 
Â  Â Â 
Â  Â  padding: 25px;Â 
Â  Â  padding-bottom: 75px;Â 
Â  Â Â 
Â  Â  overflow-y: auto;Â 
Â  Â  border-left: 1px solid rgba(255, 255, 255, 0.15);
Â  Â  color: #eee;
Â  Â  position: relative;Â 
}
.description-column h3 {
Â  Â  font-size: 1.5rem;
Â  Â  margin-bottom: 15px;
Â  Â  color: #fff;
Â  Â  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
Â  Â  padding-bottom: 5px;
}
.description-column p {
Â  Â  margin-bottom: 15px;
}

/* Navigation Panel Position (Centered at Bottom of Panel) */
.modal-nav-panel {
Â  Â  position: absolute;Â 
Â  Â  bottom: 0;
Â  Â  left: 0;Â 
Â  Â  right: 0;
Â  Â Â 
Â  Â  z-index: 1020;
Â  Â  display: flex;
Â  Â  gap: 10px;Â 
Â  Â Â 
Â  Â  background: #333;Â 
Â  Â  backdrop-filter: blur(5px);
Â  Â Â 
Â  Â  padding: 10px 25px;Â 
Â  Â Â 
Â  Â  /* FIXED: Ensure the bottom corners are rounded */
Â  Â  border-radius: 0 0 15px 15px;Â 
Â  Â  border-top: 1px solid rgba(255, 255, 255, 0.15);
Â  Â Â 
Â  Â  align-items: center;
}
.modal-nav-panel .modal-nav-button {
Â  Â  width: 50px;Â 
Â  Â  height: 50px;Â 
Â  Â  font-size: 1.4rem;
}
#modal-close-btn {Â 
Â  Â  font-size: 2.0rem;Â 
}


#modal-caption { display: none; }


/* Magnifier/Image Styles */
#magnifier-container {
Â  Â  position: relative;Â 
Â  Â  width: 100%;
Â  Â  max-width: 100%;Â 
Â  Â  margin: 0 auto;
Â  Â  cursor: crosshair;
Â  Â  display: inline-block;
Â  Â  overflow: hidden;Â 
}
#magnifier-container .mag-image {
Â  Â  display: block;
Â  Â  width: 100%;
Â  Â  height: auto;
Â  Â  border-radius: 15px;
Â  Â  max-height: 78vh;Â 
Â  Â  object-fit: contain;
Â  Â  margin-bottom: 0;
Â  Â Â 
Â  Â  position: relative;
Â  Â  left: 0;
Â  Â  opacity: 1;
Â  Â  transition: left 300ms ease-out, opacity 100ms;
}

.mag-lens {
Â  Â  position: absolute;
Â  Â  border: 3px solid rgba(255, 255, 255, 0.8);
Â  Â  background-repeat: no-repeat;
Â  Â  width: 180px;Â 
Â  Â  height: 180px;
Â  Â  border-radius: 50%;
Â  Â  box-shadow:Â 
Â  Â  Â  Â  0 0 0 1px #000,Â 
Â  Â  Â  Â  0 0 10px rgba(0, 0, 0, 0.6),Â 
Â  Â  Â  Â  inset 0 0 20px rgba(255, 255, 255, 0.2);
Â  Â  opacity: 0;
Â  Â  top: 0;Â 
Â  Â  left: 0;Â 
Â  Â  pointer-events: none;Â 
Â  Â  transition: opacity 0.2s;
Â  Â  z-index: 10;
}


/* --- Responsive adjustments --- */
@media (max-width: 900px) {
Â  /* Stack columns vertically on smaller screens */
Â  .modal-content {
Â  Â  Â  flex-direction: column;
Â  Â  Â  height: 90vh;
Â  Â  Â  max-width: 90%;
Â  }
Â  .image-column {
Â  Â  Â  border-radius: 15px 15px 0 0;
Â  Â  Â  min-height: 60vh;
Â  }
Â  .description-column {
Â  Â  Â  /* FIXED: Ensure all bottom corners are rounded (15px) when stacked vertically */
Â  Â  Â  border-radius: 0 0 15px 15px;Â 
Â  Â  Â  border-left: none;
Â  Â  Â  border-top: 1px solid rgba(255, 255, 255, 0.15);
Â  Â  Â  max-height: 30vh;
Â  Â  Â  padding-bottom: 75px;Â 
Â  }
Â  .description-column h3 { margin-top: 0; }
Â  #magnifier-container .mag-image { max-height: 55vh; }

Â  /* Navigation panel on mobile */
Â  .modal-nav-panel {
Â  Â  Â  position: absolute;Â 
Â  Â  Â  bottom: 0;
Â  Â  Â  left: 0;
Â  Â  Â  right: 0;
Â  Â  Â  width: 100%;
Â  Â  Â  padding: 10px 0;
Â  Â  Â  justify-content: center;
Â  Â  Â  background: #333;Â 
Â  Â  Â  /* FIXED: Round bottom corners when stacked vertically */
Â  Â  Â  border-radius: 0 0 15px 15px;Â 
Â  Â  Â  border-top: 1px solid rgba(255, 255, 255, 0.15);
Â  }
}

/* Clean up unused modal arrow positioning from previous versions */
.modal-arrow-shell, .close-button-shell { display: none !important; }

</style>
</head>
<body>

<header>
Â  <div class="header-content">
Â  Â  <h1>Randy Mattoka</h1>
Â  Â  <nav>
Â  Â  Â  <a href="#about-me">About Me</a> Â  Â  Â  <a href="#completed">Completed Artwork</a>
Â  Â  Â  <a href="#nightwatch">Nightwatch</a>
Â  Â  Â  <a href="#process">Process</a>
Â  Â  Â  <a href="#contact">Contact</a>
Â  Â  </nav>
Â  </div>
</header>

<section id="about-me" class="glass">
  <h2>About Me</h2>
  <p style="text-align: center; max-width: 800px; margin: 0 auto; padding-top: 10px;">
    Hello! I'm Randy Mattoka, and this portfolio is a collection of my digital art, primarily focusing on character illustration, fan art, and concept design.
  </p>
  <p style="text-align: center; max-width: 800px; margin: 15px auto 0;">
    I specialize in dynamic compositions and bold color palettes, drawing inspiration from comics, video games, and fictional media. Whether it's a quick sketch or a polished piece, I aim to bring energy and narrative to every drawing. Below you will also find concept art and pieces of a video game my friend and I are currently hard at work on, titled Nightwatch. Take a look around and feel free to reach out!
  </p>
</section>
  
<section id="completed" class="glass">
Â  <h2>Completed Artwork</h2>
Â  <div class="carousel-wrapper" data-section="completed">
Â  Â  <div class="arrow-shell left"><button class="arrow left" aria-label="Previous">&#10094;</button></div>
Â  Â  <div class="carousel-container">
Â  Â  Â  <div class="carousel-track">
Â  Â  Â  Â  <img src="images/fanart1.png" alt="Artwork 1 - Sandman X Metallica" loading="lazy" data-index="0" data-desc="This is a piece I made of the comic book character Dream, otherwise know as The Sandmam. He is depicted shredding on an electric guitar, giving a nod to Metallica's timeless hit &quot;Enter Sandman.&quot;" data-date="October 2nd, 2025">
Â  Â  Â  Â  <img src="images/fanart2.png" alt="Artwork 2 - Spiderman" loading="lazy" data-index="1" data-desc="A drawing of Spiderman that utilizes bold colors and shadows, emphasizing the dynamic between him and his spidey senses on the foreground." data-date="September 26th, 2025">
Â  Â  Â  Â  <img src="images/fanart3.png" alt="Artwork 3 - Dante, Devil May Cry" loading="lazy" data-index="2" data-desc="Dante has always been one of my favorite video game characters. This drawing depicts a younger Dante, particularly from Devil May Cry 3: Dante's Awakening. This piece was stylized as a more poster-like aesthtic." data-date="April 12th, 2025">
Â  Â  Â  Â  <img src="images/fanart4.png" alt="Artwork 4 - Super Buu" loading="lazy" data-index="3" data-desc="Buu is an iconic villain from the acclaimed anime series Dragon Ball Z. This drawing utlizes multiple shades of pink to portray the lighting on Buu's skin, with his magical power orbs in his hands being the main light source of this piece." data-date="August 21st, 2024">
Â  Â  Â  Â  <img src="images/fanart5.png" alt="Artwork 5 - Deadpool" loading="lazy" data-index="4" data-desc="This drawing of the comic book character Deadpool uses black and whites as well as screentones for shading. This allows for the green portions to really pop and draw the audience's attention to these critical parts, which allows the viewer's eye to follow the piece in a natural, streamlined manner." data-date="June 16th, 2024">
Â  Â  Â  Â  <img src="images/fanart6.png" alt="Artwork 6 - Wolverine" loading="lazy" data-index="5" data-desc="A drawing of the iconic X-Men character, Wolverine. Apart from black and white, this piece utilizes 4 colors, one of which is the blood on wolverine's claws. Although a more violent piece, it is able to captivate the audience by drawing their eye to the critical portions, his claws, muscles, and eventually his cowl." data-date="September 14th, 2025">
Â  Â  Â  Â  <img src="images/fanart7.png" alt="Artwork 7" loading="lazy" data-index="6" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/fanart8.png" alt="Artwork 8" loading="lazy" data-index="7" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/fanart9.png" alt="Artwork 9" loading="lazy" data-index="8" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/fanart10.png" alt="Artwork 10" loading="lazy" data-index="9" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/fanart11.png" alt="Artwork 11" loading="lazy" data-index="10" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/fanart12.png" alt="Artwork 12" loading="lazy" data-index="11" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/fanart13.png" alt="Artwork 13" loading="lazy" data-index="12" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/fanart14.png" alt="Artwork 14" loading="lazy" data-index="13" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/fanart15.png" alt="Artwork 15" loading="lazy" data-index="1" data-desc="" data-date="">
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div class="arrow-shell right"><button class="arrow right" aria-label="Next">&#10095;</button></div>
Â  </div>
</section>

<section id="nightwatch" class="glass">
Â  <h2>Nightwatch</h2>
Â  <div class="carousel-wrapper" data-section="nightwatch">
Â  Â  <div class="arrow-shell left"><button class="arrow left" aria-label="Previous">&#10094;</button></div>
Â  Â  <div class="carousel-container">
Â  Â  Â  <div class="carousel-track">
Â  Â  Â  Â  <img src="images/nightwatch1.png" alt="Nightwatch 1" data-index="0" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/nightwatch2.png" alt="Nightwatch 2" data-index="1" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/nightwatch3.png" alt="Nightwatch 3" data-index="2" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/nightwatch4.png" alt="Nightwatch 4" data-index="3" data-desc="" data-date="">
Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div class="arrow-shell right"><button class="arrow right" aria-label="Next">&#10095;</button></div>
Â  </div>
</section>

<section id="process" class="glass">
Â  <h2>Process / Sketches</h2>
Â  <div class="carousel-wrapper" data-section="process">
Â  Â  <div class="arrow-shell left"><button class="arrow left" aria-label="Previous">&#10094;</button></div>
Â  Â  <div class="carousel-container">
Â  Â  Â  <div class="carousel-track">
Â  Â  Â  Â  <img src="images/process1.png" alt="Process 1" data-index="0" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process2.png" alt="Process 2" data-index="1" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process3.png" alt="Process 3" data-index="2" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process4.png" alt="Process 4" data-index="3" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process5.png" alt="Process 5" data-index="4" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process6.png" alt="Process 6" data-index="5" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process7.png" alt="Process 7" data-index="6" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process8.png" alt="Process 8" data-index="7" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process9.png" alt="Process 9" data-index="8" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process10.png" alt="Process 10" data-index="9" data-desc="" data-date="">
Â  Â  Â  Â  <img src="images/process11.png" alt="Process 11" data-index="10" data-desc="" data-date="">
Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div class="arrow-shell right"><button class="arrow right" aria-label="Next">&#10095;</button></div>
Â  </div>
</section>

<section id="contact" class="glass">
Â  <h2>Contact</h2>
Â  <p style="text-align:center;">Email:
Â  Â  <a href="mailto:randy.mattoka@gmail.com">randy.mattoka@gmail.com</a>
Â  </p>
</section>

<footer>
Â  <div class="footer-content">
Â  Â  &copy; 2025 Randy Mattoka
Â  </div>
</footer>

<div id="image-modal" class="modal-overlay" style="display: none;">
Â  Â Â 
Â  Â  <div id="modal-content-area" class="modal-content">
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="image-column">
Â  Â  Â  Â  Â  Â  <div id="magnifier-container">
Â  Â  Â  Â  Â  Â  Â  Â  <img id="modal-image" class="mag-image" src="" alt="">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="magnifier-lens" class="mag-lens"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="description-column" style="position: relative;">
Â  Â  Â  Â  Â  Â  <h3 id="description-title">Title Placeholder</h3>
Â  Â  Â  Â  Â  Â  <p id="description-text">
Â  Â  Â  Â  Â  Â  Â  Â  Sample description text will go here.
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  <p id="description-meta">
Â  Â  Â  Â  Â  Â  Â  Â  Date: 2024
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="modal-nav-panel">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="modal-close-btn" class="modal-nav-button" aria-label="Close Image">&times;</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="modal-prev-btn" class="modal-nav-button" aria-label="Previous Image">&#10094;</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="modal-next-btn" class="modal-nav-button" aria-label="Next Image">&#10095;</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  </div>
Â  Â  <p id="modal-caption"></p>Â 
</div>
<script>
/* --- Carousel Script --- */
document.querySelectorAll('.carousel-wrapper').forEach(wrapper=>{
Â  const track = wrapper.querySelector('.carousel-track');
Â  const leftBtn = wrapper.querySelector('.arrow.left');
Â  const rightBtn = wrapper.querySelector('.arrow.right');
Â  const imgs = Array.from(track.querySelectorAll('img'));
Â Â 
Â  imgs.forEach((img, i) => {
Â  Â  Â  img.setAttribute('data-index', i);
Â  });

Â  if (!track || imgs.length === 0) return;

Â  let index = 0;

Â  function slideSize(){
Â  Â  const gap = parseFloat(getComputedStyle(track).gap) || 30;
Â  Â  return imgs[0].getBoundingClientRect().width + gap;
Â  }

Â  function update(){
Â  Â  const s = slideSize();
Â  Â  const containerWidth = wrapper.querySelector('.carousel-container').getBoundingClientRect().width;
Â  Â  const offset = (containerWidth / 2) - (imgs[index].getBoundingClientRect().width / 2);
Â  Â  track.style.transform = `translateX(${-(index * s) + offset}px)`;
Â  Â  imgs.forEach((im,i)=>{
Â  Â  Â  im.classList.remove('center','side');
Â  Â  Â  if (i === index) im.classList.add('center'); else im.classList.add('side');
Â  Â  });
Â  Â  if (leftBtn) leftBtn.disabled = (index === 0);
Â  Â  if (rightBtn) rightBtn.disabled = (index === imgs.length - 1);
Â  }

Â  if (leftBtn) leftBtn.addEventListener('click', ()=>{ if (index>0) { index--; update(); }});
Â  if (rightBtn) rightBtn.addEventListener('click', ()=>{ if (index < imgs.length - 1) { index++; update(); }});
Â Â 
Â  wrapper.setAttribute('tabindex', '0');
Â  wrapper.addEventListener('keydown', (e)=>{
Â  Â  if (e.key === 'ArrowLeft' && index > 0) { index--; update(); }
Â  Â  if (e.key === 'ArrowRight' && index < imgs.length - 1) { index++; update(); }
Â  });

Â  let startX = null;
Â  wrapper.addEventListener('touchstart', e => startX = e.touches[0].clientX);
Â  wrapper.addEventListener('touchend', e => {
Â  Â  if (startX === null) return;
Â  Â  const dx = e.changedTouches[0].clientX - startX;
Â  Â  if (Math.abs(dx) > 50) {
Â  Â  Â  if (dx > 0 && index > 0) index--;
Â  Â  Â  else if (dx < 0 && index < imgs.length - 1) index++;
Â  Â  Â  update();
Â  Â  }
Â  Â  startX = null;
Â  });

Â  window.addEventListener('resize', ()=>setTimeout(update, 90));
Â  setTimeout(update, 60);
});


/* --- ğŸ” Lightbox Modal and Magnifier Functionality (WITH PRELOADING) --- */
const modal = document.getElementById('image-modal');
const modalImg = document.getElementById('modal-image');
const descriptionTitle = document.getElementById('description-title');
const descriptionText = document.getElementById('description-text');
const descriptionMeta = document.getElementById('description-meta');
const closeModal = document.getElementById('modal-close-btn');

const magContainer = document.getElementById('magnifier-container');
const magLens = document.getElementById('magnifier-lens');

const modalPrevBtn = document.getElementById('modal-prev-btn');
const modalNextBtn = document.getElementById('modal-next-btn');

let currentSectionImages = [];
let currentImageIndex = 0;

const zoomFactor = 2.5;Â 
const lensRadius = 90;Â 

function showLens() {
Â  Â  magLens.style.opacity = 1;
}

function hideLens() {
Â  Â  magLens.style.opacity = 0;
}

/**
Â * Preloads an image into the browser cache for faster display later.
Â * @param {number} index - The index of the image in currentSectionImages to preload.
Â */
function preloadImage(index) {
Â  Â  if (index >= 0 && index < currentSectionImages.length) {
Â  Â  Â  Â  const imgElement = currentSectionImages[index];
Â  Â  Â  Â  const tempImg = new Image();
Â  Â  Â  Â  tempImg.src = imgElement.src;
Â  Â  }
}

// Function to handle the actual image change with a slide effect
function performImageTransition(newImageElement, direction) {
Â  Â  let slideDistance, resetDistance;

Â  Â  // Next button (right arrow): slide current image LEFT
Â  Â  if (direction === 'next') {Â 
Â  Â  Â  Â  slideDistance = '-100%';
Â  Â  Â  Â  resetDistance = '100%';
Â  Â  } else { // Previous button (left arrow): slide current image RIGHT
Â  Â  Â  Â  slideDistance = '100%';
Â  Â  Â  Â  resetDistance = '-100%';
Â  Â  }

Â  Â  // 1. Start the slide out animation
Â  Â  modalImg.style.left = slideDistance;
Â  Â  modalImg.style.opacity = 0;

Â  Â  // 2. After the animation completes, change the source and slide back in
Â  Â  setTimeout(() => {
Â  Â  Â  Â  // Reset the image position off-screen on the opposite side
Â  Â  Â  Â  modalImg.style.transition = 'none'; // Temporarily disable transition
Â  Â  Â  Â  modalImg.style.left = resetDistance;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // UPDATE CONTENT
Â  Â  Â  Â  modalImg.src = newImageElement.src;
Â  Â  Â  Â  modalImg.alt = newImageElement.alt;
Â  Â  Â  Â  magLens.style.backgroundImage = `url('${newImageElement.src}')`;
Â  Â  Â  Â  descriptionTitle.textContent = newImageElement.alt; // Use alt tag for title
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Use data-desc attribute for description
Â  Â  Â  Â  const descText = newImageElement.getAttribute('data-desc') || "No detailed description available for this piece.";
Â  Â  Â  Â  descriptionText.textContent = descText;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Update meta info - MODIFIED to read from data-date
Â  Â  Â  Â  const artworkDate = newImageElement.getAttribute('data-date') || "N/A";
Â  Â  Â  Â  descriptionMeta.innerHTML = `Date: ${artworkDate}`;Â 


Â  Â  Â  Â  // Wait for the next frame, then start the slide in
Â  Â  Â  Â  requestAnimationFrame(() => {
Â  Â  Â  Â  Â  Â  modalImg.style.transition = 'left 300ms ease-out, opacity 100ms';
Â  Â  Â  Â  Â  Â  modalImg.style.left = '0';
Â  Â  Â  Â  Â  Â  modalImg.style.opacity = 1;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Re-run magnifier size calculation
Â  Â  Â  Â  Â  Â  if (modalImg.complete) {
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(updateMagnifierSize, 50);Â 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }, 300); // 300ms matches the CSS transition time
}


function updateModalContent(imgElement, direction) {
Â  Â  // Perform the slide transition
Â  Â  performImageTransition(imgElement, direction);
Â  Â Â 
Â  Â  // Update button states immediately
Â  Â  modalPrevBtn.disabled = (currentImageIndex === 0);
Â  Â  modalNextBtn.disabled = (currentImageIndex === currentSectionImages.length - 1);
Â  Â Â 
Â  Â  // PRELOAD next images (or previous, depending on the current index)
Â  Â  preloadImage(currentImageIndex + 1);
Â  Â  preloadImage(currentImageIndex - 1);
}

function openModal(imgElement) {
Â  Â  const sectionWrapper = imgElement.closest('.carousel-wrapper');
Â  Â  const track = sectionWrapper ? sectionWrapper.querySelector('.carousel-track') : null;
Â  Â  currentSectionImages = track ? Array.from(track.querySelectorAll('img')) : [imgElement];
Â  Â Â 
Â  Â  currentImageIndex = parseInt(imgElement.getAttribute('data-index')) || 0;

Â  Â  modal.style.display = "flex";Â 
Â  Â  document.body.style.overflow = "hidden";
Â  Â Â 
Â  Â  // Initial content setup (without transition)
Â  Â  modalImg.src = imgElement.src;
Â  Â  modalImg.alt = imgElement.alt;
Â  Â  magLens.style.backgroundImage = `url('${imgElement.src}')`;
Â  Â  modalImg.style.left = '0';Â 
Â  Â  modalImg.style.opacity = 1;
Â  Â Â 
Â  Â  // Initial Description Panel Content
Â  Â  descriptionTitle.textContent = imgElement.alt;
Â  Â  const descText = imgElement.getAttribute('data-desc') || "No detailed description available for this piece.";
Â  Â  descriptionText.textContent = descText;
Â  Â Â 
Â  Â  // Update meta info - MODIFIED to read from data-date
Â  Â  const artworkDate = imgElement.getAttribute('data-date') || "N/A";
Â  Â  descriptionMeta.innerHTML = `Date: ${artworkDate}`;


Â  Â  modalPrevBtn.disabled = (currentImageIndex === 0);
Â  Â  modalNextBtn.disabled = (currentImageIndex === currentSectionImages.length - 1);

Â  Â  magContainer.addEventListener('mouseenter', showLens);
Â  Â  magContainer.addEventListener('mouseleave', hideLens);
Â  Â  magContainer.addEventListener('mousemove', handleMagnify);
Â  Â  window.addEventListener('resize', updateMagnifierSize);
Â  Â Â 
Â  Â  // Attach Navigation Listeners (only once)
Â  Â  modalPrevBtn.addEventListener('click', showPrev);
Â  Â  modalNextBtn.addEventListener('click', showNext);
Â  Â  document.addEventListener('keydown', handleKeyNavigation);
Â  Â Â 
Â  Â  if (modalImg.complete) {
Â  Â  Â  Â  setTimeout(updateMagnifierSize, 50);Â 
Â  Â  }
Â  Â Â 
Â  Â  // PRELOAD next images on open
Â  Â  preloadImage(currentImageIndex + 1);Â 
Â  Â  preloadImage(currentImageIndex - 1);Â 
}

function showPrev() {
Â  Â  if (currentImageIndex > 0) {
Â  Â  Â  Â  currentImageIndex--;
Â  Â  Â  Â  updateModalContent(currentSectionImages[currentImageIndex], 'prev');
Â  Â  }
}

function showNext() {
Â  Â  if (currentImageIndex < currentSectionImages.length - 1) {
Â  Â  Â  Â  currentImageIndex++;
Â  Â  Â  Â  updateModalContent(currentSectionImages[currentImageIndex], 'next');
Â  Â  }
}

function handleKeyNavigation(e) {
Â  Â  if (modal.style.display === 'flex') {
Â  Â  Â  Â  if (e.key === 'ArrowLeft') showPrev();
Â  Â  Â  Â  if (e.key === 'ArrowRight') showNext();
Â  Â  Â  Â  if (e.key === 'Escape') closeLightbox();
Â  Â  }
}


function updateMagnifierSize() {
Â  Â  const largeSizeX = modalImg.clientWidth * zoomFactor;
Â  Â  const largeSizeY = modalImg.clientHeight * zoomFactor;
Â  Â  magLens.style.backgroundSize = `${largeSizeX}px ${largeSizeY}px`;
Â  Â  magLens.style.opacity = 0;Â 
}

function handleMagnify(e) {
Â  Â  const rect = magContainer.getBoundingClientRect();
Â  Â  let x = e.clientX - rect.left;
Â  Â  let y = e.clientY - rect.top;

Â  Â  // Position the center of the lens at the cursor (using transform)
Â  Â  magLens.style.left = `${x}px`;
Â  Â  magLens.style.top = `${y}px`;
Â  Â  magLens.style.transform = `translate(-${lensRadius}px, -${lensRadius}px)`;Â 

Â  Â  // Calculate background position: compensate for the zoom factor and the lens radius
Â  Â  let backgroundX = x * zoomFactor - lensRadius;Â 
Â  Â  let backgroundY = y * zoomFactor - lensRadius;

Â  Â  // Apply the inverse position to the background image
Â  Â  magLens.style.backgroundPosition = `-${backgroundX}px -${backgroundY}px`;
}

function closeLightbox() {
Â  Â  modal.style.display = "none";
Â  Â  document.body.style.overflow = "auto";
Â  Â Â 
Â  Â  // REMOVE ALL LISTENERS
Â  Â  magContainer.removeEventListener('mouseenter', showLens);
Â  Â  magContainer.removeEventListener('mouseleave', hideLens);
Â  Â  magContainer.removeEventListener('mousemove', handleMagnify);
Â  Â  window.removeEventListener('resize', updateMagnifierSize);
Â  Â  modalPrevBtn.removeEventListener('click', showPrev);
Â  Â  modalNextBtn.removeEventListener('click', showNext);
Â  Â  document.removeEventListener('keydown', handleKeyNavigation);
Â  Â Â 
Â  Â  magLens.style.opacity = 0;
}

// 1. Attach click handler to every carousel image to open the modalÂ 
document.addEventListener('DOMContentLoaded', () => {
Â  Â  document.querySelectorAll('.carousel-track img').forEach(img => {
Â  Â  Â  Â  img.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  e.stopPropagation();Â 
Â  Â  Â  Â  Â  Â  openModal(img);
Â  Â  Â  Â  });
Â  Â  });
});

// 2. Attach close handlersÂ 
closeModal.addEventListener('click', closeLightbox);

// Close when clicking outside the image content (on the dark overlay)
modal.addEventListener('click', (e) => {
Â  Â  if (e.target.id === 'image-modal') {
Â  Â  Â  Â  closeLightbox();
Â  Â  }
});
</script>

</body>
</html>
